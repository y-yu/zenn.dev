---
title: "Zennã®è¨˜äº‹ã‚’GitHub Pagesã§ç„¡ç†ã‚„ã‚Šè¡¨ç¤ºã™ã‚‹"
emoji: "ğŸ“„"
type: "tech"
topics: ["zenn", "docker", "github"]
published: true
---

# ã¯ã˜ã‚ã«

Zennã§ã¯Zennä¸Šã®Webã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚’åˆ©ç”¨ã—ã¦è¨˜äº‹ã‚’åŸ·ç­†ã™ã‚‹æ–¹æ³•ã®ä»–ã«æ–¹æ³•ã®ä»–ã«ã€[GitHubãƒªãƒã‚¸ãƒˆãƒªãƒ¼ã¨é€£æºã•ã›ã‚‹](https://zenn.dev/zenn/articles/connect-to-github)ã“ã¨ã§Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã§è¨˜äº‹ã‚’åŸ·ç­†ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚ã“ã‚Œã¨[Zenn CLI](https://zenn.dev/zenn/articles/install-zenn-cli)ã‚’é§†ä½¿ã™ã‚‹ã“ã¨ã§ã€GitHubã«ã—ãŸè¨˜äº‹ãŒè‡ªå‹•çš„ã«GitHub Pagesã«æŠ•ç¨¿ã•ã‚Œã‚‹ã‚ˆã†ãªã‚‚ã®ãŒã§ããŸã®ã§ã€ã“ã®è¨˜äº‹ã§ã¯ã“ã‚Œã‚’ç´¹ä»‹ã™ã‚‹ã€‚ãŸã¨ãˆã°ã“ã‚Œã‚’ä½¿ãˆã°æ›¸ãã‹ã‘ã®è¨˜äº‹ã‚’èª°ã‹ã¨å…±æœ‰ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ä½œæˆã—ãŸã‚‚ã®ã¯ä¸‹è¨˜ã®GitHubãƒªãƒã‚¸ãƒˆãƒªãƒ¼ã«ãŠã„ã¦ã‚ã‚‹ã€‚

- https://github.com/y-yu/zenn.dev

ãã—ã¦ã€ã“ã“ã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ãªãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

- https://y-yu.github.io/zenn.dev/articles/54134d8df9f9b5385fc3.html

# ã‚„ã£ãŸã“ã¨

## 1. Zenn CLIã®å…¥ã£ãŸDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½œæˆ

ã“ã‚Œã¯Zennã«ã‚‚ã„ãã¤ã‹è¨˜äº‹ãŒã‚ã£ãŸãŒã€Docker Hubã«ã‚ãŒã£ã¦ã„ã‚‹ã‚‚ã®ãŒè»½ãèª¿ã¹ãŸé™ã‚Šã§ãªã‹ã£ãŸã®ã§ä½œæˆã—ãŸã€‚ã¨ã„ã£ã¦ã‚‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã©ãŠã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã ã‘ã§ã‚ã‚‹ã€‚

```dockerfile:Dockerfile

FROM node:14

LABEL maintainer="YOSHIMURA Hikaru<yyu@mental.poker>"

WORKDIR /workdir

RUN npm init --yes \
    && npm install -g zenn-cli@latest \
    && npx zenn init

EXPOSE 8000
```

ã‚ã¨ã§Zenn CLIã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ã®ã§`8000`ãƒãƒ¼ãƒˆã‚’`EXPOSE`ã—ã¦ãŠãã€‚

## 2. `docker-compose`ã§Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’èµ·å‹•

ã“ã®ã¨ãã«ã“ã®ãƒªãƒã‚¸ãƒˆãƒªãƒ¼ã‚’ãƒœãƒªãƒ¥ãƒ¼ãƒ ã«ã—ã¦Dockerã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¤ã¤ã€`npx zenn preview`ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã€‚

```yaml:docker-compose.yml
version: '3.2'
services:
  zenn-preview:
    image: yyupw/zenn:latest
    build:
      context: .
      dockerfile: ./docker/Dockerfile
      cache_from:
        - yyupw/zenn:latest
    volumes:
      - .:/workdir
    entrypoint: npx zenn preview
    ports:
      - 8000:8000
```

GitHub Actionsã‚’åˆ©ç”¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«ã—ãŸã€‚

## 3. `wget`ã§CSSã‚„JSã‚‚å«ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

ã™ã”ãé©å½“ãªBashã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ï¼ˆ2ï¼‰ã§ç«‹ã¡ä¸Šã’ãŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚„CSSãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã‚’å…¨ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚

```bash:wget.sh
#!/bin/bash

set -x

sleep 2

if [ ! -d "./targets" ]; then
  mkdir targets
fi

wget --mirror \
  --quiet --show-progress \
  --no-parent \
  --convert-links \
  --no-host-directories \
  --adjust-extension \
  --execute robots=off \
  --directory-prefix=./targets \
  http://localhost:8000/

for article in ./articles/*.md; do
  if [[ $article =~ articles/(.*)\.md ]]; then
    wget --mirror \
      --page-requisites \
      --quiet --show-progress \
      --no-parent \
      --convert-links \
      --no-host-directories \
      --adjust-extension \
      --execute robots=off \
      --directory-prefix=./targets \
      "http://localhost:8000/articles/${BASH_REMATCH[1]}"
  fi
done

exit 0
```

## 3. GitHub Pagesã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

ã“ã‚Œã¯Travis CIã ã¨å…¬é–‹éµã‚’GitHubã®Deploy Keysã«ç™»éŒ²ã™ã‚‹ãªã©é¢å€’ãªã“ã¨ãŒå¤šã‹ã£ãŸãŒã€GitHub Actionsãªã‚‰[JamesIves/github-pages-deploy-action](https://github.com/marketplace/actions/deploy-to-github-pages)ã‚’ä½¿ã†ã ã‘ã§OKã§ã‚ã‚‹ã€‚

# æ³¨æ„ã™ã‚‹ç‚¹

ã‚ã¾ã‚Šæœ¬è³ªçš„ã§ã¯ãªã„ãŒæ³¨æ„ã™ã‚‹ç‚¹ã‚’ã‚ã’ã¦ãŠãã€‚

- `.nojekyll`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`gh-pages`ãƒ–ãƒ©ãƒ³ãƒãªã©ã«è¨­å®šã—ã¦ãŠã
    - ã“ã‚ŒãŒãªã„ã¨`_next`ãªã©ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ãŒãªã„æ‰±ã„ï¼ˆ404 Not Foundï¼‰ã¨ãªã£ã¦ã—ã¾ã†
- $\LaTeX$å½¢å¼ã®æ•°å¼ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œãªã„
    - ã©ã†ã—ã¦â€¦â€¦ğŸ˜‡
# ã¾ã¨ã‚

`wget`ã‚³ãƒãƒ³ãƒ‰ã§å…¨ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã„ã†æ–¹æ³•ã¯è¶…é©å½“ã§ã¯ã‚ã‚‹ãŒã€ã¨ã‚Šã‚ãˆãšã“ã‚Œã§ä½•ã‹ãã‚Œã£ã½ã„ã‚‚ã®ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã¯ã§ããã†ã§ã‚ã‚‹ã€‚æœ¬å½“ã¯Zenn CLIã«HTMLã‚’åãå‡ºã™ãƒ¢ãƒ¼ãƒ‰ãŒå®Ÿè£…ã•ã‚Œã‚‹ã¨ã‚ˆã„ã¨ã¯æ€ã†ã€‚

